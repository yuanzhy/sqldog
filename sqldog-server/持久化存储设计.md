## 数据存储简单设计

### 页结构 16K
|  名称        | 中文名  | 占用空间大小 | 简单描述
|  ----       |   ----   |     ----     | ----  |
| Page Header | 页面头部 | 16字节 | 数据页专有的一些信息 |
| User Records| 用户记录 | -      | 实际存储的行记录内容 |
| Free Space  | 空闲空间 | -      | 页中尚未使用的空间 |

### Page Header
|  名称            | 占用空间 | 描述
|  ----            |     ----     | ----  |
| CHKSUM           | 4字节 | 页的校验和（checksum值） |
| FREE_START       | 2字节 | 还未使用的空间最小地址，也就是说从该地址之后就是Free Space |
| FREE_END         | 2字节 | 还未使用的空间最大地址，也就是说从该地址之前就是Free Space |
| PAGE_MAX_TRX_ID  | 8字节 | 修改当前页的最大事务ID，该值仅在二级索引中定义 |

### User Records
一条数据（数据库行）由 Header(2字节) + Data（实际数据，由用户写入）组成。

- **Header**

|  名称      | 占用空间 | 描述
|  ----      |  ----   | ----  |
| DELETED    | 1bit    | 标记该记录是否已删除，1为删除 |
| LENGTH     | 15bit   | 数据长度，NULL RECORD |

- **Data**
  - NULL RECORD, 可为空的字段数量*bit, 8bit补齐，1代表NULL，逆序存储
  - 变长字符串第一个字节（字段长度>255则用2字节表示）代表后续内容的长度
  - 大字段使用6字节存储位置，其中2字节表示文件，2字节表示起始偏移，2字节表示数据长度



